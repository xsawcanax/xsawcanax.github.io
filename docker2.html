<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uruchomienie aplikacji w kontenerze</title>
</head>
<body>

    <h1>Uruchomienie aplikacji w kontenerze</h1>

    <p>Aby uruchomić aplikację w kontenerze za pomocą Dockera, wykonaj następujące kroki:</p>

    <ol>
        <li>
            <strong>Zainstaluj Docker:</strong><br>
            Upewnij się, że Docker jest zainstalowany na Twoim systemie. Możesz pobrać go z oficjalnej strony Docker: <a href="https://www.docker.com/get-started" target="_blank">https://www.docker.com/get-started</a>.
        </li>
        <li>
            <strong>Przygotuj obraz:</strong><br>
            Jeśli nie masz obrazu aplikacji, który chciałbyś użyć, musisz go przygotować. Możesz utworzyć plik Dockerfile, który zawiera instrukcje do zbudowania obrazu na podstawie Twojej aplikacji. (O tym więcej w <a href="docker3.html">rozdziale trzecim</a>)
        </li>
        <li>
            <strong>Zbuduj obraz:</strong><br>
            Otwórz terminal w katalogu zawierającym Dockerfile i wykonaj polecenie: <code>docker build -t nazwa_obrazu:tag .</code>
        </li>
        <li>
            <strong>Uruchom kontener:</strong><br>
            Po zbudowaniu obrazu możesz uruchomić kontener: <code>docker container run -p 3000:3000 nazwa_obrazu:tag</code><br>
            Opcja <code>-p</code> przekierowuje porty, więc jeśli Twoja aplikacja działa na porcie 3000, to będzie dostępna na porcie 3000 na Twoim lokalnym systemie.
        </li>
    </ol>

    <h2>Nawiązywanie połączenia z kontenerem</h2>

    <p>Aby nawiązać połączenie z kontenerem, możesz użyć kilku różnych metod, w zależności od tego, co chcesz osiągnąć. Oto kilka popularnych sposobów:</p>

    <ol>
        <li><strong>Uruchamianie interaktywnego trybu kontenera:</strong><br>
            <code>docker run -it nazwa_obrazu </code> - To polecenie uruchomi kontener w trybie interaktywnym, co pozwoli Ci na bezpośrednie korzystanie z powłoki wewnątrz kontenera.
        </li>
        <li><strong>Uruchamianie polecenia w kontenerze:</strong><br>
            <code>docker exec -it nazwa_kontenera polecenie</code> - Polecenie <code>docker exec</code> pozwala uruchamiać polecenia w działającym kontenerze. To umożliwia interakcję z kontenerem, nie wchodząc w tryb interaktywny.
        </li>
        <li><strong>Uruchamianie aplikacji w tle:</strong><br>
            Jeśli chcesz uruchomić kontener w tle i nawiązać z nim połączenie później, możesz użyć: <code>docker container run -d nazwa_obrazu</code> - A następnie użyj <code>docker exec</code> do uruchomienia poleceń w kontenerze.
        </li>
        <li><strong>Port Forwarding:</strong><br>
            Jeśli aplikacja w kontenerze udostępnia usługę sieciową (np. serwer HTTP) i chcesz uzyskać do niej dostęp z hosta, użyj przekierowania portów: <code>docker run -p host_port:container_port nazwa_obrazu</code> - Następnie możesz połączyć się z aplikacją w kontenerze za pomocą <code>localhost:host_port</code>.
        </li>
        <li><strong>Docker Compose:</strong><br>
            Jeśli używasz Docker Compose, możesz skonfigurować usługi w pliku <code>docker-compose.yml</code> i następnie użyć <code>docker-compose exec</code> do wykonywania poleceń w kontenerze.
            <pre><code>docker-compose exec nazwa_usługi polecenie</code></pre>

<p>W zależności od potrzeb i kontekstu, jedna z powyższych metod może być bardziej odpowiednia. Wybór zależy od tego, czy chcesz uzyskać dostęp do powłoki, uruchomić polecenia, czy nawiązać połączenie sieciowe z aplikacją w kontenerze.</p>

<h2>Jak Docker wykonuje kontenery?</h2>

<p>Docker wykonuje kontenery przy użyciu technologii konteneryzacji, której kluczowe elementy to namespace'y i cgroups.</p>

<ol>
    <li><strong>Namespace'y:</strong>
        <ul>
            <li><strong>Pid Namespace:</strong> Izoluje przestrzeń procesów, dzięki czemu procesy w jednym kontenerze są odizolowane od procesów w innych kontenerach i na hostzie.</li>
            <li><strong>Network Namespace:</strong> Zapewnia izolację przestrzeni sieciowej, co oznacza, że interfejsy sieciowe, tabele routingu itp. są odseparowane dla każdego kontenera.</li>
            <li><strong>Mount Namespace:</strong> Izoluje przestrzeń systemu plików, umożliwiając, aby kontenery miały własne systemy plików, niezależne od hosta i innych kontenerów.</li>
        </ul>
    </li>
    <li><strong>cgroups (Control Groups):</strong> Cgroups umożliwiają kontrolę i ograniczenia zasobów, takich jak CPU, pamięć RAM, dysk itp., które mogą być przypisane do kontenerów. Pozwala to na efektywne zarządzanie zasobami systemowymi.</li>
    <li><strong>Docker Daemon:</strong> Docker Daemon to tło procesu, który zarządza operacjami na kontenerach. Przyjmuje polecenia od użytkownika, komunikuje się z Docker API i zarządza cyklem życia kontenerów.</li>
    <li><strong>Docker Client:</strong> Docker Client to interfejs linii komend lub interfejs graficzny, który pozwala użytkownikowi komunikować się z Docker Daemon, wysyłając polecenia i odbierając wyniki.</li>
    <li><strong>Docker Image:</strong> Docker Image to szablon, na podstawie którego tworzone są kontenery. Zawiera wszystko, co jest potrzebne do uruchomienia aplikacji, w tym kod, zależności, konfigurację itp.</li>
</ol>

<p>Proces wykonania kontenera w skrócie wygląda tak:</p>

<ol>
    <li>Użytkownik wydaje polecenie Docker Clienta, na przykład <code>docker run</code>.</li>
    <li>Docker Client komunikuje się z Docker Daemon, który przetwarza to polecenie.</li>
    <li>Docker Daemon sprawdza, czy istnieje odpowiedni Docker Image. Jeśli nie, pobiera go z Docker Hub lub innych źródeł.</li>
    <li>Daemon tworzy nowy kontener na podstawie obrazu, konfiguruje namespace'y i cgroups, alokuje zasoby, a następnie uruchamia procesy wewnątrz kontenera.</li>
    <li>Procesy w kontenerze są izolowane od innych procesów na systemie, a kontener ma własne środowisko wykonawcze i system plików.</li>
</ol>

<p>Dzięki tym mechanizmom Docker osiąga izolację i przenośność, co pozwala na łatwe uruchamianie aplikacji w różnych środowiskach.</p>
