<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dlaczego dane w kontenerach nie są trwałe?</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <h1>Dlaczego dane w kontenerach nie są trwałe?</h1>

    <p>Dane w kontenerach (takich jak kontenery Docker czy inne technologie do konteneryzacji) są zazwyczaj trwałe do momentu, gdy kontener jest uruchomiony. Jednakże, gdy kontener zostaje zatrzymany i usunięty, wszelkie zmiany dokonane w trakcie działania kontenera mogą zostać utracone. Istnieje kilka powodów, dlaczego dane w kontenerach nie są trwałe:</p>

    <ol>
        <li><strong>Model działania kontenerów:</strong><br>
            Kontenery są oparte na modelu działania warstwowego. Każda zmiana w kontenerze powoduje utworzenie nowej warstwy, a stara warstwa pozostaje niezmieniona. Gdy kontener jest zatrzymywany i usuwany, wszystkie zmiany wprowadzone w trakcie działania kontenera zostają utracone, ponieważ warstwy są tymczasowe i znikają wraz z kontenerem.
        </li>
        <li><strong>Skrócony cykl życia:</strong><br>
            Kontenery są projektowane do krótkiego cyklu życia, co oznacza, że są łatwo tworzone, uruchamiane, zatrzymywane i usuwane. To podejście ma na celu zapewnienie łatwości zarządzania infrastrukturą. Jednakże, trwałość danych często wymagałaby innego podejścia, takiego jak korzystanie z zewnętrznych zasobów (np. woluminów) czy systemów zarządzania danymi.
        </li>
        <li><strong>Domyślne zachowanie systemu plików kontenera:</strong><br>
            Systemy plików w kontenerach składają się z warstw obrazu oraz warstwy zapisywalnej. Modyfikowanie plików w kontenerze nie wpływa na obraz, a dane w warstwie zapisywalnej są ulotne. Oznacza to, że wszelkie zmiany dokonane w trakcie działania kontenera są przechowywane w warstwie tymczasowej, która może zostać utracona po zatrzymaniu kontenera.
        </li>
        <li><strong>Woluminy:</strong><br>
            Chociaż dane w warstwach kontenera mogą być nietrwałe, można korzystać z mechanizmu woluminów, aby przechowywać dane poza kontenerem. Woluminy są montowane do kontenera i przechowują dane poza warstwami kontenera, co pozwala na trwałe przechowywanie informacji nawet po zatrzymaniu lub usunięciu kontenera.
        </li>
    </ol>

    <p>Aby przechowywać dane trwale w kontenerach, często stosuje się techniki takie jak korzystanie z woluminów, zarządzanie danymi na poziomie hosta lub korzystanie z zewnętrznych rozwiązań do przechowywania danych, które są niezależne od cyklu życia kontenera.</p>
    
    <h1>Uruchomianie kontenerów z woluminami Dockera</h1>
    <p>Aby uruchomić kontener z woluminami w Dockerze, możesz użyć flagi <code>-v</code> lub <code>--volume</code> w poleceniu <code>docker run</code>, aby zmapować lokalny katalog na katalog wewnątrz kontenera. Oto przykładowe polecenie:</p>
    <div class="code-container">
        <pre><code>docker run -v /ścieżka/do/lokalnego/katalogu1:/ścieżka/do/katalogu1/w/kontenerze -v /ścieżka/do/lokalnego/katalogu2:/ścieżka/do/katalogu2/w/kontenerze nazwa_obrazu</code></pre>
    </div>
    <p>Przykładowo, aby uruchomić kontener na podstawie obrazu o nazwie <code>moj_obraz</code>, który będzie miał dostęp do katalogu <code>/app</code> wewnątrz kontenera i zmapować lokalny katalog <code>/home/user/moja_aplikacja</code> do tego katalogu, użyj poniższego polecenia:</p>
    <div class="code-container">
        <pre><code>docker run -v /home/user/moja_aplikacja:/app moj_obraz</code></pre>
    </div>
    <p>Możesz również użyć wielu flag <code>-v</code>, aby zmapować wiele woluminów. Na przykład:</p>
    <div class="code-container">
        <pre><code>docker run -v /ścieżka/do/lokalnego/katalogu1:/ścieżka/do/katalogu1/w/kontenerze -v /ścieżka/do/lokalnego/katalogu2:/ścieżka/do/katalogu2/w/kontenerze nazwa_obrazu</code></pre>
    </div>
    <p>W ten sposób możesz zapewnić dostęp do danych pomiędzy lokalnym systemem plików a kontenerem Dockerowym.</p>
  <h2>Dodawanie woluminów poprzez instrukcje VOLUME w pliku DOCKERFILE</h2>
    <p>Kolejnym sposobem dodawania woluminów w Dockerze jest umieszczenie instrukcji <code>VOLUME</code> w pliku DOCKERFILE. Woluminy zdefiniowane w ten sposób mogą być montowane podczas uruchamiania kontenera i są często używane do przechowywania danych, które powinny być trwałe, nawet po zatrzymaniu kontenera.</p>
    <p>Oto przykład definicji woluminu w pliku DOCKERFILE:</p>
    <div class="code-container">
        <pre><code>VOLUME /ścieżka/do/katalogu/w/kontenerze</code></pre>
    </div>
    <p>Powyższa instrukcja VOLUME w pliku DOCKERFILE definiuje wolumin, który będzie dostępny dla kontenera pod podaną ścieżką. Możesz dodać tę instrukcję do swojego pliku DOCKERFILE, aby zdefiniować wolumin dla Twojego kontenera Dockerowego.</p>
    <h2>Współdzielenie woluminów z obrazu</h2>
    <p>Możesz również współdzielić woluminy między kontenerami, korzystając z flagi <code>--volumes-from</code> w poleceniu <code>docker run</code>. Ta opcja pozwala kontenerowi na dostęp do woluminów z innego kontenera. Na przykład:</p>
    <div class="code-container">
        <pre><code>docker run --volumes-from=container_name nazwa_obrazu</code></pre>
    </div>
    <p>To polecenie uruchomi nowy kontener i umożliwi mu dostęp do woluminów z kontenera o nazwie <code>container_name</code>.</p>
    <h1>Uruchamianie kontenerów z dowiązaniami systemu plików</h1>
    <p>Aby uruchomić kontener z dowiązaniami systemu plików w Dockerze, można wykorzystać flagę <code>--mount</code> lub <code>-v</code> w poleceniu <code>docker run</code>. Za pomocą tej flagi można mapować lokalne katalogi lub woluminy na katalogi wewnątrz kontenera. Oto przykładowe polecenie:</p>
    <div class="code-container">
        <pre><code>docker run --mount type=bind,source=/ścieżka/do/lokalnego/katalogu,target=/ścieżka/w/kontenerze nazwa_obrazu</code></pre>
    </div>
    <p>Na przykład, aby uruchomić kontener na podstawie obrazu o nazwie <code>moj_obraz</code>, który będzie miał dostęp do katalogu <code>/app</code> wewnątrz kontenera i zmapować lokalny katalog <code>/home/user/moja_aplikacja</code> do tego katalogu, użyj poniższego polecenia:</p>
    <div class="code-container">
        <pre><code>docker run --mount type=bind,source=/home/user/moja_aplikacja,target=/app moj_obraz</code></pre>
    </div>
    <p>Można również użyć flagi <code>-v</code>, co jest skrótem dla <code>--mount type=bind</code>. Na przykład:</p>
    <div class="code-container">
        <pre><code>docker run -v /ścieżka/do/lokalnego/katalogu:/ścieżka/w/kontenerze nazwa_obrazu</code></pre>
    </div>
    <p>W ten sposób możesz zapewnić dostęp do danych pomiędzy lokalnym systemem plików a kontenerem Dockerowym.</p>

</body>
</html>
